<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
    <title>Reference</title>
    <link rel="stylesheet" href="../ldoc.css" type="text/css" />
</head>
<body>

<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->


<div id="main">


<!-- Menu -->

<div id="navigation">
<br/>
<h1>ldoc</h1>


<ul>
  <li><a href="../index.html">Index</a></li>
</ul>

<h2>Contents</h2>
<ul>
<li><a href="#Methods">Methods</a></li>
</ul>


<h2>Classes</h2>
<ul class="nowrap">
  <li><a href="../classes/Condition.html">Condition</a></li>
  <li><a href="../classes/Creature.html">Creature</a></li>
  <li><a href="../classes/Effect.html">Effect</a></li>
  <li><a href="../classes/Faction.html">Faction</a></li>
  <li><a href="../classes/Feature.html">Feature</a></li>
  <li><a href="../classes/Item.html">Item</a></li>
  <li><strong>Map</strong></li>
  <li><a href="../classes/Projectile.html">Projectile</a></li>
  <li><a href="../classes/RangedAttack.html">RangedAttack</a></li>
  <li><a href="../classes/Service.html">Service</a></li>
  <li><a href="../classes/Spell.html">Spell</a></li>
  <li><a href="../classes/Store.html">Store</a></li>
</ul>
<h2>Modules</h2>
<ul class="nowrap">
  <li><a href="../modules/gamelogic.html">gamelogic</a></li>
  <li><a href="../modules/input.html">input</a></li>
  <li><a href="../modules/jumper.core.bheap.html">jumper.core.bheap</a></li>
  <li><a href="../modules/jumper.core.heuristics.html">jumper.core.heuristics</a></li>
  <li><a href="../modules/jumper.core.node.html">jumper.core.node</a></li>
  <li><a href="../modules/jumper.core.path.html">jumper.core.path</a></li>
  <li><a href="../modules/jumper.grid.html">jumper.grid</a></li>
  <li><a href="../modules/jumper.pathfinder.html">jumper.pathfinder</a></li>
  <li><a href="../modules/lib.serialize.html">lib.serialize</a></li>
  <li><a href="../modules/mapgen.html">mapgen</a></li>
  <li><a href="../modules/output.html">output</a></li>
  <li><a href="../modules/util.html">util</a></li>
</ul>
<h2>Scripts</h2>
<ul class="nowrap">
  <li><a href="../scripts/jumper.search.astar.html">jumper.search.astar</a></li>
  <li><a href="../scripts/jumper.search.bfs.html">jumper.search.bfs</a></li>
  <li><a href="../scripts/jumper.search.dfs.html">jumper.search.dfs</a></li>
  <li><a href="../scripts/jumper.search.dijkstra.html">jumper.search.dijkstra</a></li>
  <li><a href="../scripts/jumper.search.jps.html">jumper.search.jps</a></li>
</ul>

</div>

<div id="content">

<h1>Class <code>Map</code></h1>
<p></p>
<p></p>


<h2><a href="#Methods">Methods</a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#map:init">map:init (width, height, gridOnly)</a></td>
	<td class="summary">Initiates a map.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:clear">map:clear (open, clearAll)</a></td>
	<td class="summary">Completely clear everything from a map.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:isClear">map:isClear (x, y, ctype, ignoreCreats, ignore_safety, projectile, ignoreAttackableFeatures)</a></td>
	<td class="summary">Checks whether a map tile is clear</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:isEmpty">map:isEmpty (x, y, ignoreCreats, lookAtBaseTile)</a></td>
	<td class="summary">Checks whether a map tile is totally empty (not just open for movement)</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:isWall">map:isWall (x, y)</a></td>
	<td class="summary">Determines if a tile is a wall</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:isFloor">map:isFloor (x, y)</a></td>
	<td class="summary">Determines if a tile's base is a floor.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:tile_has_tag">map:tile_has_tag (x, y, tag)</a></td>
	<td class="summary">Checks if the tile_info of a tile has a certain tag set, or if any of the features in that tile have that tag set</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:get_contents">map:get_contents (x, y)</a></td>
	<td class="summary">Gets contents of a map tile</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:can_enter">map:can_enter (x, y, creature, fromX, fromY)</a></td>
	<td class="summary">Run the terrain can_enter() callbacks for the creature's location</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:enter">map:enter (x, y, creature, fromX, fromY)</a></td>
	<td class="summary">Run the terrain enter() callbacks for the creature's location</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:can_see_through">map:can_see_through (x, y, args)</a></td>
	<td class="summary">Determines if a given tile blocks vision</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:get_tile_creature">map:get_tile_creature (x, y, get_attackable_features, ignoreNoDraw)</a></td>
	<td class="summary">Gets what creature (if any) is on a tile</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:get_tile_features">map:get_tile_features (x, y)</a></td>
	<td class="summary">Gets a list of all features (if any) on a tile.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:tile_has_feature">map:tile_has_feature (x, y, id)</a></td>
	<td class="summary">Check if a tile has a specific feature</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:get_blocking_feature">map:get_blocking_feature (x, y)</a></td>
	<td class="summary">Returns the first feature that blocks movement</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:get_tile_items">map:get_tile_items (x, y, getAdjacent, ignoreContainers)</a></td>
	<td class="summary">Gets a list of all items (if any) on a tile.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:tile_has_item">map:tile_has_item (x, y, id)</a></td>
	<td class="summary">Check if a tile has an item on it</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:get_tile_actions">map:get_tile_actions (x, y, user, noAdjacent, noCreature)</a></td>
	<td class="summary">Gets a list of all feature actions (if any) available at and around a tile.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:is_line">map:is_line (startX, startY, endX, endY, pass_through_walls, ctype, ignoreCreats, ignoreSafety, ignoreAttackableFeatures)</a></td>
	<td class="summary">Determines if you can draw a straight line between two tiles.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:get_line">map:get_line (startX, startY, endX, endY, pass_through_walls, ctype, ignoreCreats, ignoreSafety, ignoreAttackableFeatures)</a></td>
	<td class="summary">Gets a line between two tiles, stopping when you encounter an obstacle.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:get_tile_effects">map:get_tile_effects (x, y)</a></td>
	<td class="summary">Gets all effects (if any) on a tile.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:tile_has_effect">map:tile_has_effect (x, y, id)</a></td>
	<td class="summary">Check if a tile has a specific effect on it</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:add_creature">map:add_creature (creature, x, y, ignoreFunc)</a></td>
	<td class="summary">Add a creature to a tile</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:add_feature">map:add_feature (feature, x, y, args)</a></td>
	<td class="summary">Add a feature to a tile</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:add_effect">map:add_effect (effect, x, y, args)</a></td>
	<td class="summary">Add an effect to a tile</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:add_item">map:add_item (item, x, y, ignoreFunc)</a></td>
	<td class="summary">Add an item to a tile</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:change_tile">map:change_tile (feature, x, y)</a></td>
	<td class="summary">Set a map tile to be a certain feature</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:findPath">map:findPath (fromX, fromY, toX, toY, cType, terrainLimit)</a></td>
	<td class="summary">Find a path between two points</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:touching">map:touching (fromX, fromY, toX, toY)</a></td>
	<td class="summary">Check if two tiles are touching</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:swap">map:swap (creature1, creature2)</a></td>
	<td class="summary">Swap the positions of two creatures.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:refresh_pathfinder">map:refresh_pathfinder (cType, terrainLimit, ignoreSafety)</a></td>
	<td class="summary">Refresh a pathfinder on the map</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:clear_all_pathfinders">map:clear_all_pathfinders ()</a></td>
	<td class="summary">Delete all the pathfinders from the map</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:is_passable_for">map:is_passable_for (x, y, cType, include_effects, ignore_safety, ignoreAttackableFeatures)</a></td>
	<td class="summary">Checks if a tile is passable for a certain creature</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:get_tile_hazards">map:get_tile_hazards (x, y, ctype, include_effects)</a></td>
	<td class="summary">Gets the potential hazards on a tile</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:refresh_images">map:refresh_images ()</a></td>
	<td class="summary">Refresh all the tile images on the map</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:refresh_tile_image">map:refresh_tile_image (x, y, contentsOnly)</a></td>
	<td class="summary">Refresh a specific tile's tile image</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:in_map">map:in_map (x, yNumber., exclude_borders)</a></td>
	<td class="summary">Checks if a tile is within the map boundaries</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:refresh_lightMap">map:refresh_lightMap (true)</a></td>
	<td class="summary">Refresh the light map of the map.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:refresh_light">map:refresh_light (light, forceRefresh)</a></td>
	<td class="summary">Refresh the light map based on a light-emitting entity's light.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:is_lit">map:is_lit (x, y)</a></td>
	<td class="summary">Checks if a tile is lit.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:clear_tile">map:clear_tile (x, y)</a></td>
	<td class="summary">Delete everything from a tile</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:reveal">map:reveal ()</a></td>
	<td class="summary">Mark every tile on the map as "seen" (the whole map will be revealed, but won't see creatures and effects outside of LOS)</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:get_creature_list">map:get_creature_list (self, force, allowAll)</a></td>
	<td class="summary">Get a list of possible creatures to spawn on this map.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:get_item_list">map:get_item_list (self, force, allowAll)</a></td>
	<td class="summary">Get a list of possible items to spawn on the given map</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:get_store_list">map:get_store_list (self, force)</a></td>
	<td class="summary">Get a list of possible stores to spawn on the given map.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:get_faction_list">map:get_faction_list (self, force)</a></td>
	<td class="summary">Get a list of possible factions to spawn on the given map</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:populate_creatures">map:populate_creatures (creatTotal, forceGeneric)</a></td>
	<td class="summary">Randomly add creatures to the map</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:populate_items">map:populate_items (itemTotal, forceGeneric)</a></td>
	<td class="summary">Randomly add items to the map</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:populate_stores">map:populate_stores (forceGeneric)</a></td>
	<td class="summary">Randomly add a store to the map.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:populate_factions">map:populate_factions (forceGeneric)</a></td>
	<td class="summary">Randomly add an appropriate faction to the map.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:cleanup">map:cleanup ()</a></td>
	<td class="summary">Cleans up the map, removing effects with temporary durations, and entities with remove_on_cleanup=true</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:get_name">map:get_name (noBranch)</a></td>
	<td class="summary">Gets the full name string of the map (eg The Wilds Depth 2: The Forest of Horror)</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:get_min_level">map:get_min_level ()</a></td>
	<td class="summary">Get the minimum creature level for this map</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:get_max_level">map:get_max_level ()</a></td>
	<td class="summary">Get the maximum creature level for this map</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:get_content_tags">map:get_content_tags (tagType, noBranch)</a></td>
	<td class="summary">Get a map's content tags</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:has_content_tag">map:has_content_tag (tag, tagType)</a></td>
	<td class="summary">Checks if a map has a given content tag</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:has_tag">map:has_tag (tag)</a></td>
	<td class="summary">Checks if a map has a descriptive tag.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:damage_all">map:damage_all (x, y, amt, attacker, damage_type, args, armor_piercing, noSound, item, ignoreWeakness, attackerSafe, tweak, conditions, source_name, creatureSafe)</a></td>
	<td class="summary">Applies damage to all creates and features in a tile
Damage a creature</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:register_incident">map:register_incident (incidentID, actor, target, args)</a></td>
	<td class="summary">Registers an incident as having occured, to be processed by all other creatures who observe it</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#map:clear_caches">map:clear_caches ()</a></td>
	<td class="summary">Clear all map caches</td>
	</tr>
</table>

<br/>
<br/>


    <h2 class="section-header "><a name="Methods"></a>Methods</h2>

    <dl class="function">
    <dt>
    <a name = "map:init"></a>
    <strong>map:init (width, height, gridOnly)</strong>
    </dt>
    <dd>
    Initiates a map.  Don't call this explicitly, it's called when you create a new map with Map(50,50).


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">width</span>
         Number. The width of the map
        </li>
        <li><span class="parameter">height</span>
         Number. The height of the map
        </li>
        <li><span class="parameter">gridOnly</span>
         Boolean. If set to true, then extra tables (eg creatures, lights, pathfinders) will not be created for the map (optional)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        Map. The map itself.
    </ol>




</dd>
    <dt>
    <a name = "map:clear"></a>
    <strong>map:clear (open, clearAll)</strong>
    </dt>
    <dd>
    Completely clear everything from a map.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">open</span>
         Boolean. If True, make the whole map open floor. Otherwise, fill it with walls. Optional
        </li>
        <li><span class="parameter">clearAll</span>
         Boolean. If True, also clear out the various sub-tables of the map
        </li>
    </ul>





</dd>
    <dt>
    <a name = "map:isClear"></a>
    <strong>map:isClear (x, y, ctype, ignoreCreats, ignore_safety, projectile, ignoreAttackableFeatures)</strong>
    </dt>
    <dd>
    Checks whether a map tile is clear


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">x</span>
         Number. The x-coordinate to check
        </li>
        <li><span class="parameter">y</span>
         Number. The y-coordinate to check
        </li>
        <li><span class="parameter">ctype</span>
         String. The creature type to use when checking if the tile is passable (optional)
        </li>
        <li><span class="parameter">ignoreCreats</span>
         Boolean. Whether to ignore creatures when considering a tile clear (optional)
        </li>
        <li><span class="parameter">ignore_safety</span>
         Boolean. Whether to ignore dangerous but transversable features (optional)
        </li>
        <li><span class="parameter">projectile</span>
         Boolean. Whether to consider the tile free for a projectile vs a creature.
        </li>
        <li><span class="parameter">ignoreAttackableFeatures</span>
         Boolean. Whether to ignore attackable features when considering a tile clear (optional)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        Boolean. Whether the tile is clear
    </ol>




</dd>
    <dt>
    <a name = "map:isEmpty"></a>
    <strong>map:isEmpty (x, y, ignoreCreats, lookAtBaseTile)</strong>
    </dt>
    <dd>
    Checks whether a map tile is totally empty (not just open for movement)


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">x</span>
         Number. The x-coordinate to check
        </li>
        <li><span class="parameter">y</span>
         Number. The y-coordinate to check
        </li>
        <li><span class="parameter">ignoreCreats</span>
         Boolean. Whether to ignore creatures when considering a tile empty (optional)
        </li>
        <li><span class="parameter">lookAtBaseTile</span>
         Boolean. Whether to count the base tile being a feature as "not empty" (optional)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        Boolean. Whether the tile is clear
    </ol>




</dd>
    <dt>
    <a name = "map:isWall"></a>
    <strong>map:isWall (x, y)</strong>
    </dt>
    <dd>
    Determines if a tile is a wall


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">x</span>
         Number. The x-coordinate to check
        </li>
        <li><span class="parameter">y</span>
         Number. The y-coordinate to check
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        boolean. Whether or not it is a wall tile
    </ol>




</dd>
    <dt>
    <a name = "map:isFloor"></a>
    <strong>map:isFloor (x, y)</strong>
    </dt>
    <dd>
    Determines if a tile's base is a floor.  Does NOT check if the space is actually open


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">x</span>
         Number. The x-coordinate to check
        </li>
        <li><span class="parameter">y</span>
         Number. The y-coordinate to check
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        boolean. Whether or not it is a floor tile
    </ol>




</dd>
    <dt>
    <a name = "map:tile_has_tag"></a>
    <strong>map:tile_has_tag (x, y, tag)</strong>
    </dt>
    <dd>
    Checks if the tile_info of a tile has a certain tag set, or if any of the features in that tile have that tag set


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">x</span>
         Number. The x-coordinate to check
        </li>
        <li><span class="parameter">y</span>
         Number. The y-coordinate to check
        </li>
        <li><span class="parameter">tag</span>
         String. The tag to look for
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>
        <li>
        boolean. Whether or not it has the tag</li>
        <li>
        Feature. The feature that has the tag, if applicable</li>
    </ol>




</dd>
    <dt>
    <a name = "map:get_contents"></a>
    <strong>map:get_contents (x, y)</strong>
    </dt>
    <dd>
    Gets contents of a map tile


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">x</span>
         Number. The x-coordinate
        </li>
        <li><span class="parameter">y</span>
         Number. The y-coordinate
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        Table. A table of all the contents of the tile
    </ol>




</dd>
    <dt>
    <a name = "map:can_enter"></a>
    <strong>map:can_enter (x, y, creature, fromX, fromY)</strong>
    </dt>
    <dd>
    Run the terrain can_enter() callbacks for the creature's location


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">x</span>
         Number. The x-coordinate
        </li>
        <li><span class="parameter">y</span>
         Number. The y-coordinate
        </li>
        <li><span class="parameter">creature</span>
         Creature. The creature entering the tile
        </li>
        <li><span class="parameter">fromX</span>
         Number. The x-coordinate the creature is leaving (optional)
        </li>
        <li><span class="parameter">fromY</span>
         Number. The y-coordinate the creature is leaving (optional)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        Boolean. Whether or not the tile can be entered
    </ol>




</dd>
    <dt>
    <a name = "map:enter"></a>
    <strong>map:enter (x, y, creature, fromX, fromY)</strong>
    </dt>
    <dd>
    Run the terrain enter() callbacks for the creature's location


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">x</span>
         Number. The x-coordinate
        </li>
        <li><span class="parameter">y</span>
         Number. The y-coordinate
        </li>
        <li><span class="parameter">creature</span>
         Creature. The creature entering the tile
        </li>
        <li><span class="parameter">fromX</span>
         Number. The x-coordinate the creature is leaving (optional)
        </li>
        <li><span class="parameter">fromY</span>
         Number. The y-coordinate the creature is leaving (optional)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        Boolean. Whether or not the tile can be entered
    </ol>




</dd>
    <dt>
    <a name = "map:can_see_through"></a>
    <strong>map:can_see_through (x, y, args)</strong>
    </dt>
    <dd>
    Determines if a given tile blocks vision


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">x</span>
         Number. The x-coordinate
        </li>
        <li><span class="parameter">y</span>
         Number. The y-coordinate
        </li>
        <li><span class="parameter">args</span>
         Unused for now, leave blank.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        Boolean. Whether or not the tile blocks vision
    </ol>




</dd>
    <dt>
    <a name = "map:get_tile_creature"></a>
    <strong>map:get_tile_creature (x, y, get_attackable_features, ignoreNoDraw)</strong>
    </dt>
    <dd>
    Gets what creature (if any) is on a tile


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">x</span>
         Number. The x-coordinate
        </li>
        <li><span class="parameter">y</span>
         Number. The y-coordinate
        </li>
        <li><span class="parameter">get_attackable_features</span>
         Boolean. Whether to include attackable features (optional, defaults to false)
        </li>
        <li><span class="parameter">ignoreNoDraw</span>
         Boolean. Whether creatures that have noDraw set will be included (optional, defaults to false)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        Entity or Boolean. Will be FALSE if there's nothing there.
    </ol>




</dd>
    <dt>
    <a name = "map:get_tile_features"></a>
    <strong>map:get_tile_features (x, y)</strong>
    </dt>
    <dd>
    Gets a list of all features (if any) on a tile.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">x</span>
         Number. The x-coordinate
        </li>
        <li><span class="parameter">y</span>
         Number. The y-coordinate
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        A table of features (may be empty)
    </ol>




</dd>
    <dt>
    <a name = "map:tile_has_feature"></a>
    <strong>map:tile_has_feature (x, y, id)</strong>
    </dt>
    <dd>
    Check if a tile has a specific feature


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">x</span>
         Number. The x-coordinate
        </li>
        <li><span class="parameter">y</span>
         Number. The y-coordinate
        </li>
        <li><span class="parameter">id</span>
         String. The ID of the feature to check for.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        Boolean. Whether or not the tile has this feature
    </ol>




</dd>
    <dt>
    <a name = "map:get_blocking_feature"></a>
    <strong>map:get_blocking_feature (x, y)</strong>
    </dt>
    <dd>
    Returns the first feature that blocks movement


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">x</span>
         Number. The x-coordinate
        </li>
        <li><span class="parameter">y</span>
         Number. The y-coordinate
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        Boolean. Whether or not the tile has this feature
    </ol>




</dd>
    <dt>
    <a name = "map:get_tile_items"></a>
    <strong>map:get_tile_items (x, y, getAdjacent, ignoreContainers)</strong>
    </dt>
    <dd>
    Gets a list of all items (if any) on a tile.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">x</span>
         Number. The x-coordinate
        </li>
        <li><span class="parameter">y</span>
         Number. The y-coordinate
        </li>
        <li><span class="parameter">getAdjacent</span>
         Boolean. Whether to also look at adjacent tiles (optional, defaults to false)
        </li>
        <li><span class="parameter">ignoreContainers</span>
         Boolean. Whether to ignore containers
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        A table of items (may be empty)
    </ol>




</dd>
    <dt>
    <a name = "map:tile_has_item"></a>
    <strong>map:tile_has_item (x, y, id)</strong>
    </dt>
    <dd>
    Check if a tile has an item on it


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">x</span>
         Number. The x-coordinate
        </li>
        <li><span class="parameter">y</span>
         Number. The y-coordinate
        </li>
        <li><span class="parameter">id</span>
         String. The ID of the item to check for.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        Item or false. The item, if it has it, otherwise false
    </ol>




</dd>
    <dt>
    <a name = "map:get_tile_actions"></a>
    <strong>map:get_tile_actions (x, y, user, noAdjacent, noCreature)</strong>
    </dt>
    <dd>
    Gets a list of all feature actions (if any) available at and around a tile.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">x</span>
         Number. The x-coordinate
        </li>
        <li><span class="parameter">y</span>
         Number. The y-coordinate
        </li>
        <li><span class="parameter">user</span>
         Creature. The user looking for actions. Optional, defaults to player
        </li>
        <li><span class="parameter">noAdjacent</span>
         Boolean. Whether to count adjacent tiles. Optional, defaults to false (ie adjacent tiles are counted)
        </li>
        <li><span class="parameter">noCreature</span>
         Boolean. If true, creature actions (such as speaking) don't count
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        A table of items (may be empty)
    </ol>




</dd>
    <dt>
    <a name = "map:is_line"></a>
    <strong>map:is_line (startX, startY, endX, endY, pass_through_walls, ctype, ignoreCreats, ignoreSafety, ignoreAttackableFeatures)</strong>
    </dt>
    <dd>
    Determines if you can draw a straight line between two tiles.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">startX</span>
         Number. The x-coordinate of the first tile
        </li>
        <li><span class="parameter">startY</span>
         Number. The y-coordinate of the first tile
        </li>
        <li><span class="parameter">endX</span>
         Number. The x-coordinate of the second tile
        </li>
        <li><span class="parameter">endY</span>
         Number. The y-coordinate of the second tile
        </li>
        <li><span class="parameter">pass_through_walls</span>
         Boolean. Whether to ignore walls that block the line (optional)
        </li>
        <li><span class="parameter">ctype</span>
         String. The creature path type (eg flyer) (optional)
        </li>
        <li><span class="parameter">ignoreCreats</span>
         Boolean. Whether to ignore creatures that block the line (optional)
        </li>
        <li><span class="parameter">ignoreSafety</span>
         Boolean. Whether to ignore unsafe but transversable tiles that block the line (optional)
        </li>
        <li><span class="parameter">ignoreAttackableFeatures</span>
         Boolean. Whether to ignore attackable features when considering a tile clear (optional)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        Boolean. Whether or not you can draw the line.
    </ol>




</dd>
    <dt>
    <a name = "map:get_line"></a>
    <strong>map:get_line (startX, startY, endX, endY, pass_through_walls, ctype, ignoreCreats, ignoreSafety, ignoreAttackableFeatures)</strong>
    </dt>
    <dd>
    Gets a line between two tiles, stopping when you encounter an obstacle.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">startX</span>
         Number. The x-coordinate of the first tile
        </li>
        <li><span class="parameter">startY</span>
         Number. The y-coordinate of the first tile
        </li>
        <li><span class="parameter">endX</span>
         Number. The x-coordinate of the second tile
        </li>
        <li><span class="parameter">endY</span>
         Number. The y-coordinate of the second tile
        </li>
        <li><span class="parameter">pass_through_walls</span>
         Boolean. Ignore walls that block the line (optional)
        </li>
        <li><span class="parameter">ctype</span>
         String. The creature path type (eg flyer) (optional)
        </li>
        <li><span class="parameter">ignoreCreats</span>
         Boolean. Ignore creatures that block the line (optional)
        </li>
        <li><span class="parameter">ignoreSafety</span>
         Boolean. Ignore unsafe but transversable tiles that block the line (optional)
        </li>
        <li><span class="parameter">ignoreAttackableFeatures</span>
         Boolean. Whether to ignore attackable features when considering a tile clear (optional)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        A table full of tile values.
    </ol>




</dd>
    <dt>
    <a name = "map:get_tile_effects"></a>
    <strong>map:get_tile_effects (x, y)</strong>
    </dt>
    <dd>
    Gets all effects (if any) on a tile.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">x</span>
         Number. The x-coordinate
        </li>
        <li><span class="parameter">y</span>
         Number. The y-coordinate
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        A table of effects(may be empty)
    </ol>




</dd>
    <dt>
    <a name = "map:tile_has_effect"></a>
    <strong>map:tile_has_effect (x, y, id)</strong>
    </dt>
    <dd>
    Check if a tile has a specific effect on it


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">x</span>
         Number. The x-coordinate
        </li>
        <li><span class="parameter">y</span>
         Number. The y-coordinate
        </li>
        <li><span class="parameter">id</span>
         String. The ID of the effect to check for.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        Boolean. Whether or not the tile has this effect
    </ol>




</dd>
    <dt>
    <a name = "map:add_creature"></a>
    <strong>map:add_creature (creature, x, y, ignoreFunc)</strong>
    </dt>
    <dd>
    Add a creature to a tile


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">creature</span>
         Creature. A specific creature object, NOT its ID. Usually a new creature, called using Creature('creatureID')
        </li>
        <li><span class="parameter">x</span>
         Number. The x-coordinate
        </li>
        <li><span class="parameter">y</span>
         Number. The y-coordinate
        </li>
        <li><span class="parameter">ignoreFunc</span>
         Boolean. Whether to ignore the creature's new() function (optional)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        Creature. The creature placed
    </ol>




</dd>
    <dt>
    <a name = "map:add_feature"></a>
    <strong>map:add_feature (feature, x, y, args)</strong>
    </dt>
    <dd>
    Add a feature to a tile


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">feature</span>
         Feature. A specific feature object, NOT its ID. Usually a new feature, called using Feature('featureID')
        </li>
        <li><span class="parameter">x</span>
         Number. The x-coordinate
        </li>
        <li><span class="parameter">y</span>
         Number. The y-coordinate
        </li>
        <li><span class="parameter">args</span>
         Anything. Arguments to pass to the feature's placed() code
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        Feature. The feature added
    </ol>




</dd>
    <dt>
    <a name = "map:add_effect"></a>
    <strong>map:add_effect (effect, x, y, args)</strong>
    </dt>
    <dd>
    Add an effect to a tile


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">effect</span>
         Effect. A specific effect object, NOT its ID. Usually a new effect, called using Effect('effectID')
        </li>
        <li><span class="parameter">x</span>
         Number. The x-coordinate
        </li>
        <li><span class="parameter">y</span>
         Number. The y-coordinate
        </li>
        <li><span class="parameter">args</span>
         Anything. Arguments to pass to the feature's placed() code
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        Effect. The effect added
    </ol>




</dd>
    <dt>
    <a name = "map:add_item"></a>
    <strong>map:add_item (item, x, y, ignoreFunc)</strong>
    </dt>
    <dd>
    Add an item to a tile


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">item</span>
         Item. A specific item object, NOT its ID. Usually a new item, called using Item('itemID')
        </li>
        <li><span class="parameter">x</span>
         Number. The x-coordinate
        </li>
        <li><span class="parameter">y</span>
         Number. The y-coordinate
        </li>
        <li><span class="parameter">ignoreFunc</span>
         Boolean. Whether to ignore the item's new() function (optional)
        </li>
    </ul>





</dd>
    <dt>
    <a name = "map:change_tile"></a>
    <strong>map:change_tile (feature, x, y)</strong>
    </dt>
    <dd>
    Set a map tile to be a certain feature


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">feature</span>
         Feature or String. A specific feature object, NOT its ID. Usually a new feature, called using Feature('featureID'). OR text representing floor (.) or wall (#)
        </li>
        <li><span class="parameter">x</span>
         Number. The x-coordinate
        </li>
        <li><span class="parameter">y</span>
         Number. The y-coordinate
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        Feature or String. The feature added, or the string the tile was turned into.
    </ol>




</dd>
    <dt>
    <a name = "map:findPath"></a>
    <strong>map:findPath (fromX, fromY, toX, toY, cType, terrainLimit)</strong>
    </dt>
    <dd>
    Find a path between two points


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">fromX</span>
         Number. The x-coordinate, tile 1
        </li>
        <li><span class="parameter">fromY</span>
         Number. The y-coordinate, tile 1
        </li>
        <li><span class="parameter">toX</span>
         Number. The x-coordinate, tile 2
        </li>
        <li><span class="parameter">toY</span>
         Number. The y-coordinate, tile 2
        </li>
        <li><span class="parameter">cType</span>
         String. The creature path type (eg flyer) (optional)
        </li>
        <li><span class="parameter">terrainLimit</span>
         String. Limit pathfinding to tiles with a specific feature ID (optional)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        A table of tile entries, or FALSE if there is no path.
    </ol>




</dd>
    <dt>
    <a name = "map:touching"></a>
    <strong>map:touching (fromX, fromY, toX, toY)</strong>
    </dt>
    <dd>
    Check if two tiles are touching


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">fromX</span>
         Number. The x-coordinate, tile 1
        </li>
        <li><span class="parameter">fromY</span>
         Number. The y-coordinate, tile 1
        </li>
        <li><span class="parameter">toX</span>
         Number. The x-coordinate, tile 2
        </li>
        <li><span class="parameter">toY</span>
         Number. The y-coordinate, tile 2
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        Boolean. If the tiles are touching.
    </ol>




</dd>
    <dt>
    <a name = "map:swap"></a>
    <strong>map:swap (creature1, creature2)</strong>
    </dt>
    <dd>
    Swap the positions of two creatures.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">creature1</span>
         Creature. The first creature
        </li>
        <li><span class="parameter">creature2</span>
         Creature. The second creature
        </li>
    </ul>





</dd>
    <dt>
    <a name = "map:refresh_pathfinder"></a>
    <strong>map:refresh_pathfinder (cType, terrainLimit, ignoreSafety)</strong>
    </dt>
    <dd>
    Refresh a pathfinder on the map


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">cType</span>
         String. The creature path type (eg flyer). (optional) Special values:
  "walls" paths through walls only
  "alltiles" completely open
  "roomwalls" avoids rooms and digs through walls
        </li>
        <li><span class="parameter">terrainLimit</span>
         String. If you want to limit the pathfinder to a specific feature ID (optional)
        </li>
        <li><span class="parameter">ignoreSafety</span>
         Boolean. Whether to ignore hazards (optional)
        </li>
    </ul>





</dd>
    <dt>
    <a name = "map:clear_all_pathfinders"></a>
    <strong>map:clear_all_pathfinders ()</strong>
    </dt>
    <dd>
    Delete all the pathfinders from the map







</dd>
    <dt>
    <a name = "map:is_passable_for"></a>
    <strong>map:is_passable_for (x, y, cType, include_effects, ignore_safety, ignoreAttackableFeatures)</strong>
    </dt>
    <dd>
    Checks if a tile is passable for a certain creature


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">x</span>
         Number. The x-coordinate
        </li>
        <li><span class="parameter">y</span>
         Number. The y-coordinate
        </li>
        <li><span class="parameter">cType</span>
         String. The creature path type (eg flyer) (optional)
        </li>
        <li><span class="parameter">include_effects</span>
         Boolean. Whether to include effects in the passable check (optional)
        </li>
        <li><span class="parameter">ignore_safety</span>
         Boolean. Whether to ignore dangerous but transversable tiles (optional)
        </li>
        <li><span class="parameter">ignoreAttackableFeatures</span>
         Boolean. Whether to ignore attackable features when considering a tile clear (optional)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        Boolean. If it's passable.
    </ol>




</dd>
    <dt>
    <a name = "map:get_tile_hazards"></a>
    <strong>map:get_tile_hazards (x, y, ctype, include_effects)</strong>
    </dt>
    <dd>
    Gets the potential hazards on a tile


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">x</span>

        </li>
        <li><span class="parameter">y</span>

        </li>
        <li><span class="parameter">ctype</span>

        </li>
        <li><span class="parameter">include_effects</span>

        </li>
    </ul>





</dd>
    <dt>
    <a name = "map:refresh_images"></a>
    <strong>map:refresh_images ()</strong>
    </dt>
    <dd>
    Refresh all the tile images on the map







</dd>
    <dt>
    <a name = "map:refresh_tile_image"></a>
    <strong>map:refresh_tile_image (x, y, contentsOnly)</strong>
    </dt>
    <dd>
    Refresh a specific tile's tile image


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">x</span>
         Number. The x-coordinate
        </li>
        <li><span class="parameter">y</span>
         Number. The y-coordinate
        </li>
        <li><span class="parameter">contentsOnly</span>
         Boolean. If true, don't refresh the base tile image, just the contents
        </li>
    </ul>





</dd>
    <dt>
    <a name = "map:in_map"></a>
    <strong>map:in_map (x, yNumber., exclude_borders)</strong>
    </dt>
    <dd>
    Checks if a tile is within the map boundaries


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">x</span>
         Number. The x-coordinate
        </li>
        <li><span class="parameter">yNumber.</span>
          The y-coordinate
        </li>
        <li><span class="parameter">exclude_borders</span>
         Boolean. Whether or not to exclude the tiles on the border of the map
        </li>
    </ul>





</dd>
    <dt>
    <a name = "map:refresh_lightMap"></a>
    <strong>map:refresh_lightMap (true)</strong>
    </dt>
    <dd>
    Refresh the light map of the map.  Called every turn.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">true</span>
        /false clear. Whether to clear all the lights
        </li>
    </ul>





</dd>
    <dt>
    <a name = "map:refresh_light"></a>
    <strong>map:refresh_light (light, forceRefresh)</strong>
    </dt>
    <dd>
    Refresh the light map based on a light-emitting entity's light.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">light</span>
         Entity. The light source to refresh
        </li>
        <li><span class="parameter">forceRefresh</span>
         Boolean. Whether to force the light to refresh its lit tiles
        </li>
    </ul>





</dd>
    <dt>
    <a name = "map:is_lit"></a>
    <strong>map:is_lit (x, y)</strong>
    </dt>
    <dd>
    Checks if a tile is lit.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">x</span>
         Number. The x-coordinate
        </li>
        <li><span class="parameter">y</span>
         Number. The y-coordinate
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        Boolean. If the tile is lit.
    </ol>




</dd>
    <dt>
    <a name = "map:clear_tile"></a>
    <strong>map:clear_tile (x, y)</strong>
    </dt>
    <dd>
    Delete everything from a tile


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">x</span>
         Number. The x-coordinate
        </li>
        <li><span class="parameter">y</span>
         Number. The y-coordinate
        </li>
    </ul>





</dd>
    <dt>
    <a name = "map:reveal"></a>
    <strong>map:reveal ()</strong>
    </dt>
    <dd>
    Mark every tile on the map as "seen" (the whole map will be revealed, but won't see creatures and effects outside of LOS)







</dd>
    <dt>
    <a name = "map:get_creature_list"></a>
    <strong>map:get_creature_list (self, force, allowAll)</strong>
    </dt>
    <dd>
    Get a list of possible creatures to spawn on this map.  Stores the list, so when this is called in the future it just returns the list.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">self</span>
         Map. The map to check
        </li>
        <li><span class="parameter">force</span>
         Boolean. Whether to force recalculation of the creature list (otherwise will return the stored list if it's already been calculated)
        </li>
        <li><span class="parameter">allowAll</span>
         Boolean. If True, creatures with the specialOnly flag can still be chosen based on their tags/factions/types. If not, they won't be chosen (unless already listed specifically in the map/branch lists)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        Table or nil. Either a table of creature IDs, or nil if there are no possible creatures
    </ol>




</dd>
    <dt>
    <a name = "map:get_item_list"></a>
    <strong>map:get_item_list (self, force, allowAll)</strong>
    </dt>
    <dd>
    Get a list of possible items to spawn on the given map


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">self</span>
         Map. The map to check
        </li>
        <li><span class="parameter">force</span>
         Boolean. Whether or not to forcibly re-calculate it, rather than returning the pre-calculated value
        </li>
        <li><span class="parameter">allowAll</span>
         Boolean. If True, creatures with the specialOnly flag can still be chosen based on their tags/factions/types. If not, they won't be chosen (unless already listed specifically in the map/branch lists)
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        Table or nil. Either a table of item IDs, or nil if there are no possible items
    </ol>




</dd>
    <dt>
    <a name = "map:get_store_list"></a>
    <strong>map:get_store_list (self, force)</strong>
    </dt>
    <dd>
    Get a list of possible stores to spawn on the given map.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">self</span>
         Map. The map to check
        </li>
        <li><span class="parameter">force</span>
         Boolean. Whether or not to forcibly re-calculate it, rather than returning the pre-calculated value
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        Table or nil. Either a table of faction IDs, or nil if there are no possible stores
    </ol>




</dd>
    <dt>
    <a name = "map:get_faction_list"></a>
    <strong>map:get_faction_list (self, force)</strong>
    </dt>
    <dd>
    Get a list of possible factions to spawn on the given map


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">self</span>
         Map. The map to check
        </li>
        <li><span class="parameter">force</span>
         Boolean. Whether or not to forcibly re-calculate it, rather than returning the pre-calculated value
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        Table or nil. Either a table of faction IDs, or nil if there are no possible factions
    </ol>




</dd>
    <dt>
    <a name = "map:populate_creatures"></a>
    <strong>map:populate_creatures (creatTotal, forceGeneric)</strong>
    </dt>
    <dd>
    Randomly add creatures to the map


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">creatTotal</span>
         Number. The number of creatures to add. Optional, if blank will generate enough to meet the necessary density
        </li>
        <li><span class="parameter">forceGeneric</span>
         Boolean. Whether to ignore any special populate_creatures() code in the map's mapType. Optional
        </li>
    </ul>





</dd>
    <dt>
    <a name = "map:populate_items"></a>
    <strong>map:populate_items (itemTotal, forceGeneric)</strong>
    </dt>
    <dd>
    Randomly add items to the map


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">itemTotal</span>
         Number. The number of items to add. Optional, if blank will generate enough to meet the necessary density
        </li>
        <li><span class="parameter">forceGeneric</span>
         Boolean. Whether to ignore any special populate_items() code in the map's mapType. Optional
        </li>
    </ul>





</dd>
    <dt>
    <a name = "map:populate_stores"></a>
    <strong>map:populate_stores (forceGeneric)</strong>
    </dt>
    <dd>
    Randomly add a store to the map.  This only adds one store to the map


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">forceGeneric</span>
         Boolean. Whether to ignore any special populate_stores() code in the map's mapType. Optional
        </li>
    </ul>





</dd>
    <dt>
    <a name = "map:populate_factions"></a>
    <strong>map:populate_factions (forceGeneric)</strong>
    </dt>
    <dd>
    Randomly add an appropriate faction to the map.  This only adds one faction to the map, and only factions that haven't previously been placed


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">forceGeneric</span>
         Boolean. Whether to ignore any special populate_factions() code in the map's mapType. Optional
        </li>
    </ul>





</dd>
    <dt>
    <a name = "map:cleanup"></a>
    <strong>map:cleanup ()</strong>
    </dt>
    <dd>
    Cleans up the map, removing effects with temporary durations, and entities with remove_on_cleanup=true







</dd>
    <dt>
    <a name = "map:get_name"></a>
    <strong>map:get_name (noBranch)</strong>
    </dt>
    <dd>
    Gets the full name string of the map (eg The Wilds Depth 2: The Forest of Horror)


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">noBranch</span>
         Boolean. Optional, if set to true, only returns the base name of the map without depth and branch info
        </li>
    </ul>





</dd>
    <dt>
    <a name = "map:get_min_level"></a>
    <strong>map:get_min_level ()</strong>
    </dt>
    <dd>
    Get the minimum creature level for this map







</dd>
    <dt>
    <a name = "map:get_max_level"></a>
    <strong>map:get_max_level ()</strong>
    </dt>
    <dd>
    Get the maximum creature level for this map







</dd>
    <dt>
    <a name = "map:get_content_tags"></a>
    <strong>map:get_content_tags (tagType, noBranch)</strong>
    </dt>
    <dd>
    Get a map's content tags


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">tagType</span>
         String. The type of tag
        </li>
        <li><span class="parameter">noBranch</span>
         Boolean. If true, don't look at branch's tags
        </li>
    </ul>





</dd>
    <dt>
    <a name = "map:has_content_tag"></a>
    <strong>map:has_content_tag (tag, tagType)</strong>
    </dt>
    <dd>
    Checks if a map has a given content tag


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">tag</span>
         String. The tag to check for
        </li>
        <li><span class="parameter">tagType</span>
         String. The type of tag
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        Boolean. Whether or not it has the tag.
    </ol>




</dd>
    <dt>
    <a name = "map:has_tag"></a>
    <strong>map:has_tag (tag)</strong>
    </dt>
    <dd>
    Checks if a map has a descriptive tag.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">tag</span>
         String. The tag to check for
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        Boolean. Whether or not it has the tag.
    </ol>




</dd>
    <dt>
    <a name = "map:damage_all"></a>
    <strong>map:damage_all (x, y, amt, attacker, damage_type, args, armor_piercing, noSound, item, ignoreWeakness, attackerSafe, tweak, conditions, source_name, creatureSafe)</strong>
    </dt>
    <dd>
    Applies damage to all creates and features in a tile
Damage a creature


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">x</span>
         Number. The x-coordinate.
        </li>
        <li><span class="parameter">y</span>
         Number. The y-coordinate.
        </li>
        <li><span class="parameter">amt</span>
         Number. The damage to deal.
        </li>
        <li><span class="parameter">attacker</span>
         Entity. The source of the damage.
        </li>
        <li><span class="parameter">damage_type</span>
         String. The damage type of the attack. (optional)
        </li>
        <li><span class="parameter">args</span>
         Table. A table of other arguments. All the below arguments are options to include.
        </li>
        <li><span class="parameter">armor_piercing</span>
         Boolean, or Number. If set to true, it ignores all armor. If set to a number, ignores that much armor. (optional)
        </li>
        <li><span class="parameter">noSound</span>
         Boolean. If set to true, no damage type sound will be played. (optional)
        </li>
        <li><span class="parameter">item</span>
         Item. The weapon used to do the damage. (optional)
        </li>
        <li><span class="parameter">ignoreWeakness</span>
         Boolean. If true, don't apply weakness
        </li>
        <li><span class="parameter">attackerSafe</span>
         Boolean. If true, do not harm the attacker.
        </li>
        <li><span class="parameter">tweak</span>
         Boolean. If true, tweak the damage number.
        </li>
        <li><span class="parameter">conditions</span>
         Table. A table of conditions to possible inflict, in the same format as hitConditions elsewhere.
        </li>
        <li><span class="parameter">source_name</span>
         String. The name to display for the source of the damage.
        </li>
        <li><span class="parameter">creatureSafe</span>
         Boolean. If true, don't damage creatures
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        Table. A table of all damaged entities and the damage done to them.
    </ol>




</dd>
    <dt>
    <a name = "map:register_incident"></a>
    <strong>map:register_incident (incidentID, actor, target, args)</strong>
    </dt>
    <dd>
    Registers an incident as having occured, to be processed by all other creatures who observe it


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">incidentID</span>
         String. The incident type
        </li>
        <li><span class="parameter">actor</span>
         Entity. The creature (or other entity) that caused the incident. Optional
        </li>
        <li><span class="parameter">target</span>
         Entity. The entity (or coordinates), that was the target of the incident. Optional
        </li>
        <li><span class="parameter">args</span>
         Table. Other information to use when processing this incident
        </li>
    </ul>





</dd>
    <dt>
    <a name = "map:clear_caches"></a>
    <strong>map:clear_caches ()</strong>
    </dt>
    <dd>
    Clear all map caches







</dd>
</dl>


</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/lunarmodules/LDoc">LDoc 1.5.0</a></i>
<i style="float:right;">Last updated 2025-04-07 10:52:23 </i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->
</body>
</html>
